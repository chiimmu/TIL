# 01 HTTPメッセージ
---
- Webブラウザからの要求である**HTTPリクエスト**
- Webサーバーからの応答である**HTTPレスポンス**
---
## HTTPリクエスト
---
- 「リクエスト行」「メッセージヘッダー」「メッセージボディ」の三つに分けることができる
---
## HTTPレスポンス
---
- 「ステータス行」メッセージヘッダー」「メッセージボディ」の三つに分けることができる
---
# 03 HTTPメソッド
---
## GETとPOSTの違い
---
- HTMLファイルなどのコンテンツを取得したい場合は**GET**を利用する、この場合Webブラウザの閲覧履歴が残る
- データをWebサーバーに対して送信する場合は**POST**を利用する、この場合メッセージボディー内にデータが組み込まれるため、閲覧履歴には残らない
- ユーザーIDやパスワードといったデータをWebサーバー対して送る場合は、機密性を考慮しPOSTが利用される
---
### HEADメソッド
---
- HTTPヘッダー情報のみを取得するHTTPメソッド、データの更新日時やデータのサイズのみ取得したい場合に利用する
---
## 04 ステータスコード
---
- 100番台：リクエスト継続中を通知
- 200番台：リクエストが正常に受理されたことを通知する
- 300番台：HTTPリクエストに対して、転送処理やWebブラウザ側で追加の処理が必要ことを通知、URLが変更されている場合
- 400番台：クライアント（Webブラウザ）のエラー、リクエストされたHTMLファイルなどがサーバー上に存在しない場合<br>（例：404 Not Found）
- 500番台：エラーによって、リクエストに答えられない場合や、高負荷状態で一時的にWebコンテンツを転送できない場合など
---
＃ 06 TCPにおけるデータ送信
---
- TCPは信頼性のある通信を実現するためにデータ送信後、相手からの確認応答を受けっ取ってデータの送信完了を判断する
- TCPを用いてHTTPのデータのやり取りが行われている。これはクライアントと、サーバーがお互い通信可能なのかを確認し「コネクション」という通信経路を確立した上でデータのやり取りを行う（やり取りは3回行われる）
- クライアントから接続する際に**SYNパケット**と呼ばれるデータを送る
- 確認応答として帰ってくるのは**ACKパケット**である。またACKパケットを送信すると同時にクライアントに対して接続を要求するためにSYNパケットを送信します
- サーバーからの要求に対してクライアントはACKパケットを返す
---
# 07 HTTP/1.1のやりとり
---
- HTTPは機能追加と改良が重ねられている
- HTTP/1.1が最も普及し多く利用されてる
---
## HTTPキープアライブ
---
- HTTPリクエストごとにコネクションを確立するのは効率が悪いので、コネクションを継続して利用する形になった
---
## HTTPパイプライン
---
- HTTPレスポンスを待つことなく複数のHTTPリクエストを送信することを可能にする
---
# 08 HTTP/2のやりとり
---
## ストリームによる多重化
---
- HTTPパイプラインでは、リクエストの順番通りにレスポンスを返す決まりになっていたため、後半のレスポンスは順番を待つ必要があった
- ストリームと呼ばれる仮想的な通信経路を複数生成し、」個々のストリームは独立しており並行してリクエスト、レスポンスのやりとりが可能になったため待ち時間の短縮が可能になった
---
＃ 09 HTTP/2での改良点
---
- HTTP/1.1以前は、リクエスト、レスポンス、において全てのデータが一度に送信されていたが、HTTP／２ではフレームという単位に分解されバイナリ形式で送ることができる
- ヘッダー情報には重複したデータが多いため、
- 差分のみ転送する圧縮方式（HPACK）を利用することでデータの転送量を削減できる
---
## サーバープッシュ
- 通常はWebブラウザからのHTTPリクエストに応じてWebサーバーがコンテンツを転送する。HTTP/2ではHTTPリクエストを元にWebサーバー側で必要なファイルを判別して、リクエストなしに事前にサーバーから転送する
---
# HTTPSの仕組み
---
- HTTPの通信において暗号化方式である**SSL**や**TSL**を利用することでWebサイトを安全に使うことができる
- HTTPSが利用されていれば大抵は鍵マークが表示される
---
## 盗聴防止（暗号化通信）
---
- Webサイトを閲覧する際はいくつものサーバーを経由するため通信内容を傍受されやすい
- 傍受されても良いようにデータを暗号化して防ぐ
---
## 改ざん防止
---
- 振込先が書き換えられてしまうなどの対策として**メッセージダイジェスト**が利用される
---
### メッセージダイジェスト
---
- ある一意の短いデータ（ハッシュ値）を取り出す計算
- データの送受信時にハッシュ値を比較して改ざんを検知する
---
## なりすまし防止
---
- Webサーバーに配置された**SSLサーバー証明書**と呼ばれる電子証明書を接続時に検証することで、利用者は会社の身元を確認できる
- 信頼された**認証局**以外のSSLサーバー証明書が利用されている場合は警告画面が表示される
---
# 11 HTTPSのやりとり
---
- 1.WebブラウザとWebサーバー両方が使える暗号化方式の決定、HTTPSで利用されるSSLあるいはTLSのバージョンや改ざん防止で利用されるメッセージダイジェストの方式も決定する
- 2.サーバーがブラウザにSSL証明書を送って正しい相手なのかどうかを確認する
- 3.データの転送の際の暗号化、暗号化したデータの復号に利用する鍵を交換
- 4.最後に最終確認作業が行われ暗号化通信が開始される
---
# 13 Cookie
---
- Webサーバーから送られてきたCookieを保存しておき、次接続する際にそのCookieを送信することでサーバーが相手を識別するという仕組み
- 有効期限が設定されていないCookieはWebブラウザが閉じられると同時に削除される。これを**セッションCookie**という
- 一方、有効期限が設定されているCookieはWebブラウザを閉じても削除されず有効期限が来るまでWebブラウザ上に残る
---
# 14 セッション
---
- WebブラウザとWebサーバーのやりとりの一連の処理の流れを**セッション**という
- セッション管理においてWebブラウザを識別するための情報を**セッションID**と呼ぶ
- Cookieの中にセッションIDを含めて処理を行う
- URLにセッションIDを含めるという手法もあるが漏洩する確立が高い
---
# 15 URI
---
- URIはリソースを識別するための記述方法を**URI**という
- リソースの場所、取得方法をしめすのが**URL**
- 場所は問わずにリソースの名前を示すものを**URN**
---
## リクエストURI
---
- URIを全て含める**絶対URI方式**と、URIの一部を含める**相対URI方式**がある
- 通常は記述を簡略化した**相対URI形式**で記述される
---
## パーセントエンコーディング
---
- 予約文字とは特定の目的で使用するために予約されている文字
- 非予約文字は数字やアルファベットなど、自由にURIに使用できる文字のことを言います
- 予約文字でも非予約文字でもない文字をURIで利用する場合は**パーセントエンコーディング**と呼ばれる方法を用いてその文字を変換する必要がある
- ％に続けて表記できない文字の文字コードを16進数の英式に変更する

